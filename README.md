# Проект "тестовое задание"

Проект "тестовое задание" - это тестовое задание на позиция java developer.

само задание -
Тестовое задание для разработчиков бакенда:
Спроектировать простую БД, обеспечивающую хранение информации о клиентах и их контактой информации.
Каждый клиент характеризуется именем.
Каждому клиенту в соответствие может быть поставлена информация о его контактах: 0 и более телефонных номеров, 0 и более адресов электронной почты.
Разработать в Spring Framework API, обеспечивающее работу с данной БД.
API должно обеспечивать следующие функции:
1) Добавление нового клиента
2) Добавление нового контакта клиента (телефон или email)
3) Получение списка клиентов
4) Получение информации по заданному клиенту (по id)
5) Получение списка контактов заданного клиента
6) Получение списка контактов заданного типа заданного клиента
   Реализованный проект с описанием ендпоинтов разаработанного API выложить на GIT и предоставить ссылку.

## Запуск проекта

Для запуска проекта вам понадобятся Docker и Maven.

для запуска достаточно запустить скрипт : build-and-run.sh

тогда запуститься 3 докер контейнера, с базой данных (Postgres), PgAdmin и самим приложением

Проект использует следующие переменные окружения:

- `POSTGRESQL_SERVER` - адрес сервера PostgreSQL (по умолчанию `0.0.0.0`).
- `POSTGRESQL_PORT` - порт сервера PostgreSQL (по умолчанию `5558`).
- `POSTGRESQL_DB` - название базы данных PostgreSQL (по умолчанию `db`).
- `POSTGRESQL_USERNAME` - имя пользователя PostgreSQL (по умолчанию `admin`).
- `POSTGRESQL_PASSWORD` - пароль пользователя PostgreSQL (по умолчанию `admin`).
- `SERVER_PORT` - порт, на котором работает приложение (по умолчанию `5558`).

Приложение будет доступно по адресу `http://localhost:5558`.
PGAdmin будет доступен по адресу `http://localhost:5050`.
 - юзернейм admin@admin.com
 - пароль : admin


## База Данных

приложение использует базу данных для хранения информации о клиентах и их контактах. База данных содержит две основные таблицы: "client" и "contact".

### Таблица "client" (Клиенты)

- **client_id (Идентификатор клиента)**: Уникальный идентификатор клиента, генерируется автоматически с использованием стратегии "SequenceStyleGenerator".

- **name (Имя клиента)**: Поле, хранящее имя клиента.

### Таблица "contact" (Контакты)

- **contact_id (Идентификатор контакта)**: Уникальный идентификатор контакта, генерируется автоматически.

- **client_id (Идентификатор клиента)**: Внешний ключ, связывающий контакт с конкретным клиентом.

- **ContactType (тип Контакта)**: Поле, хранящее тип контакта (EMAIL, PHONE).

- **value (Значение контакта)**: Поле, хранящее значение контакта (например, электронная почта, номер телефона и т. д.).

База данных использует отношение "один ко многим" между клиентами и их контактами, что позволяет хранить несколько контактов для каждого клиента.

База данных и классы сущностей настроены для поддержки операций создания, чтения, обновления и удаления данных о клиентах и их контактах.

важно отметить что таблицы и отношения генерятся на основе классов Entity через Hibernate


## RESTful API

приложение предоставляет следующие эндпоинты для взаимодействия с базой данных.

### Получение списка всех клиентов

**URL:** `/api/client`

**Метод:** `GET`

**Описание:** Этот эндпоинт возвращает полный список клиентов из базы данных. Вы можете использовать этот эндпоинт для получения общей информации о клиентах.

**Ответы:**

- `200 OK`: В случае успешного выполнения запроса, будет возвращен список клиентов.

- `500 Internal Server Error`: В случае возникновения ошибки на сервере.

### Получение информации о клиенте по ID

**URL:** `/api/client/{id}`

**Метод:** `GET`

**Описание:** Этот эндпоинт возвращает информацию о клиенте по указанному ID.

**Параметры:**

- `id` (путь): Идентификатор клиента.

**Ответы:**

- `200 OK`: В случае успешного выполнения запроса, будет возвращена информация о клиенте.

- `404 Not Found`: Если клиент с указанным ID не найден.


### Создание нового клиента

**URL:** `/api/client`

**Метод:** `POST`

**Описание:** Этот эндпоинт создает нового клиента на основе переданных данных.

**Параметры запроса:**

- `clientRequestDto` (тело запроса): Данные нового клиента в формате JSON.

**Пример JSON-структуры запроса:**

```json
{
  "name": "Имя клиента"
}
```

**Ответы:**

- `201 Created`: Клиент успешно создан.

- `400 Bad Request`: Если данные запроса некорректны.

### Создание контакта для клиента

**URL:** `/api/client/{id}/contact`

**Метод:** `POST`

**Описание:** Этот эндпоинт создает новый контакт для клиента с указанным ID.

**Параметры запроса:**

- `id` (переменная пути): Идентификатор клиента, для которого создается контакт.

- `contactRequestDto` (тело запроса): Данные нового контакта в формате JSON.

**Пример JSON-структуры запроса:**

```json
{
  "contactType": "Тип контакта",
  "value": "Значение контакта"
}
```
**Ответы:**

- `201 Created`: Контакт успешно создан.

- `400 Bad Request`: Если данные запроса некорректны (например, отсутствует contactType или контакт с таким значением уже существует).

- `404 Not Found`: Если клиент с указанным ID не найден.

- `409 Conflict`: Если контакт с таким значением уже существует.

### Получение контактов клиента

**URL:** `/api/clients/{id}/contact`

**Метод:** `GET`

**Описание:** Этот эндпоинт возвращает контакты клиента с указанным ID. Вы можете фильтровать контакты по типу.

**Параметры запроса:**

- `id` (переменная пути): Идентификатор клиента, для которого запрашиваются контакты.

- `contactType` (параметр запроса, необязательный): Тип контакта для фильтрации.

**Пример URL-запроса:**

- `/api/clients/{id}/contact?contactType=Тип_контакта`

**Ответы:**

- `200 OK`: Список контактов успешно получен.

- `400 Bad Request`: Если данные запроса некорректны.

- `404 Not Found`: Если клиент с указанным ID не найден.


### Документация API с использованием Swagger

API-эндпоинты документированы с использованием Swagger, что делает процесс их изучения и использования более удобным. Вы можете получить полную документацию, используя Swagger UI.

**Swagger UI:** [http://localhost:5558/swagger-ui/index.html#/](http://localhost:5558/swagger-ui/index.html#/)

Следуйте этой ссылке, чтобы получить доступ к интерактивной документации API, где вы сможете изучить доступные эндпоинты, параметры запроса и структуру данных.

С помощью Swagger, вы также можете выполнять запросы API непосредственно из документации для тестирования и проверки их работы.

Для получения JSON-описания API, вы можете использовать следующую ссылку:

**JSON-описание API:** [http://localhost:5558/v2/api-docs](http://localhost:5558/v2/api-docs)
